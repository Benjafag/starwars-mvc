@using StarWars.ViewModels
@model List<PersonajeIndexVM>

@{
  ViewData["Title"] = "Personajes";
}

<div class="sw-page p-3 p-md-4">

  <div class="d-flex flex-wrap align-items-end justify-content-between gap-2 mb-4">
    <div>
      <h1 class="display-6 fw-bold sw-title mb-1">Archivo de Personajes</h1>
      <p class="text-muted mb-0">Registros activos de la galaxia</p>
    </div>

    <span class="badge text-bg-dark border border-warning-subtle">
      Total: @(Model?.Count() ?? 0)
    </span>
  </div>

  <div class="row g-3">
    @if (Model is not null)
      @foreach (PersonajeIndexVM personaje in Model)
      {
        <div class="col-12 col-sm-6 col-lg-4 col-xl-3">

          <a asp-controller="Personajes" asp-action="Detalles" asp-route-id="@personaje.IdPersonaje"
            class="text-decoration-none text-reset d-block h-100">

            <article class="card sw-card sw-hover h-100 text-center overflow-hidden">

              <div class="position-relative">

                <img src="@(personaje.Foto ?? "/images/placeholder.webp")" alt="@personaje.Nombre" class="w-100"
                  style="aspect-ratio: 1 / 1; object-fit: cover; object-position: top;" />

                <!-- CHIP -->
                <div class="sw-chip d-flex align-items-center gap-2">

                  <img src="@personaje.ImagenPlaneta" alt="@personaje.PlanetaOrigen" class="sw-chip-img" />

                  <div class="sw-chip-text">
                    <div class="sw-chip-title">@personaje.PlanetaOrigen</div>
                    <div class="sw-chip-sub">@personaje.Especie</div>
                  </div>

                </div>

              </div>

              <div class="card-body pt-3">
                <h2 class="h6 fw-semibold mb-0 sw-title text-truncate">
                  @personaje.Nombre
                </h2>
              </div>
            </article>


          </a>

        </div>
      }
    else
    {
      <h2>No se encontraron registros</h2>
    }
  </div>
</div>